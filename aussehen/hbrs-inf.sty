%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Copyright Free Software Lab, 2011                                                %
%                                                                                  %
% Dieses Programm ist freie Software. Sie können es unter den Bedingungen der      %
% GNU General Public License, wie von der Free Software Foundation veröffentlicht, % 
% weitergeben und/oder modifizieren, entweder gemäß Version 3 derLizenz oder       %
% (nach Ihrer Option) jeder späteren Version.                                      %
%                                                                                  %
% Die Veröffentlichung dieses Programms erfolgt in der Hoffnung, daß es Ihnen      %
% von Nutzen sein wird, aber OHNE IRGENDEINE GARANTIE, sogar ohne die implizite    %
% Garantie der MARKTREIFE oder der VERWENDBARKEIT FÜR EINEN BESTIMMTEN ZWECK.      %
% Details finden Sie in der GNU General Public License.                            %
%                                                                                  %
% Sie sollten ein Exemplar der GNU General Public License zusammen mit diesem      %
% Programm erhalten haben. Falls nicht, siehe <http://www.gnu.org/licenses/>.      %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{graphicx}
%\usepackage[pdftex]{graphicx}
\usepackage{ifpdf}
\usepackage{datetime}
\usepackage{rotating} %rotation of pictures
\usepackage{graphicx}
\usepackage{fontspec}
\usepackage{xunicode}
\usepackage{xltxtra}
%\setmainfont[Mapping=tex-text]{Frutiger Linotype}
\setlength{\headheight}{1.3\baselineskip}

\ifpdf
\pdfinfo{
/Author (\ThesisAuthor)
/Title  (\ThesisTitle)
/Subject (\ThesisSubject)
/Keywords (\ThesisKeywords)
}
\fi

% Links anklickbar machen
\usepackage{hyperref}
\usepackage[usenames]{color}
\definecolor{darkblue}{rgb}{0,0,0.5}
\hypersetup{
colorlinks = true,
linkcolor = black,
%   urlcolor = darkblue, % Bei Bedarf Schwarz machen
urlcolor = black,
citecolor = black,
breaklinks = true,
pdftitle={\ThesisTitle \ThesisSubject},
pdfauthor={\ThesisAuthor},
pdfcreator={\ThesisAuthor},
pdfsubject={\ThesisTitle \ThesisSubject},
pdfkeywords={\ThesisKeywords}
}

% Abkürzungsverzeichnis (muss vor ngerman stehen)
\usepackage[acronym, toc]{glossaries-extra}
\makeglossaries
\loadglsentries{datenbanken/Abkuerzungsverzeichnis.tex}

% Deutsch und passende Seitenränder
\usepackage[ngerman]{babel}
\usepackage{csquotes}
\usepackage[paper=a4paper,left=40mm,right=20mm,top=25mm,bottom=10mm]{geometry}
\setlength{\footskip}{6mm} % Abstand Seitenzahl zu Text


%% Literatur
% Zitate
\usepackage{hypernat}

% Literaturverzeichnis nach ISO 690 (Nachfolger von DIN 1505)
% Further help at https://github.com/michal-h21/biblatex-iso690
\usepackage[
style=iso-authoryear, % or iso-numeric for numeric citation method
]{biblatex}
\addbibresource{datenbanken/Literaturverzeichnis.bib}

%\usepackage{helvet} % Serifenlose Schrift - explizit
%\renewcommand{\familydefault}{\sfdefault}

\clubpenalty=10000 % schliesst Schusterjungen aus
\widowpenalty=10000 % schliesst Hurenkinder aus

\usepackage{setspace}

%\onehalfspacing % einkommentieren für größeren zeilenabstand
\parskip0.5ex % parskip auf font/2
\parindent0ex % kein Einzug am Absatzbeginn

\RedeclareSectionCommand[beforeskip=12pt,afterskip=5pt]{section}
\RedeclareSectionCommand[beforeskip=11pt,afterskip=5pt]{subsection}
\RedeclareSectionCommand[beforeskip=11pt,afterskip=5pt]{subsubsection}
\RedeclareSectionCommand[beforeskip=11pt,afterskip=0pt]{paragraph}

% Kopfzeile und Fußzeile default
\usepackage{lastpage}
\usepackage[automark]{scrlayer-scrpage}
\pagestyle{scrheadings}
\clearmainofpairofpagestyles
\addtokomafont{pageheadfoot}{\upshape}
%\cfoot{Seite \pagemark\ von \pageref{LastPage}}
%\ihead{\ThesisTitle}

% Kopfzeile und Fußzeile definiert für Seiten zwischen Deckblatt und dem Hauptteil
\newpagestyle{bisHauptteil}{
{\hfill}
{\hfill}
{\ThesisTitle\hfill}}
{
{\hfill}
{\hfill}
{\hfill\pagemark}
}

\newpagestyle{Hauptteil}{
{\hfill}
{\hfill}
{\ThesisTitle\hfill}}
{
{\hfill}
{\hfill}
{\hfill\ \pagemark}
}


% Quellcode einfuegen und highlighten
%\usepackage{listingsutf8}
\usepackage{listings}
\definecolor{light-gray}{gray}{0.80}
\lstset{numbers=left, numberstyle=\tiny, numbersep=5pt,showstringspaces=false}
\lstset{basicstyle=\ttfamily\small,commentstyle=\itshape,backgroundcolor=\color{light-gray}}
\lstset{captionpos=b,extendedchars=true,inputencoding=utf8,breaklines=true,language=C++}

% 
% WORKAROUND, damit lstlistoflistings funktioniert:
% Quelle: http://www.komascript.de/node/477
%
% \makeatletter% --> De-TeX-FAQ
% \renewcommand*{\lstlistoflistings}{%
% \begingroup
% \if@twocolumn
% \@restonecoltrue\onecolumn
% \else
% \@restonecolfalse
% \fi
% \lol@heading
% \setlength{\parskip}{\z@}%
% \setlength{\parindent}{\z@}%
% \setlength{\parfillskip}{\z@ \@plus 1fil}%
% \@starttoc{lol}%
% \if@restonecol\twocolumn\fi
% \endgroup
% }
% \makeatother% --> \makeatletter

% versucht, Umbrueche zu erzwingen, auch wenn es zu Lasten
% des Schriftbildes geht. Hier gewaehlt, damit auf keinen Fall
% Woerter im Blocksatz ueber den Rand laufen.
\tolerance 9999


%%%%%%%%
%Makros
%%%%%%%%

% Figure Item, Caption
\newcommand{\fhbrsfigure}[2]{%
\begin{figure}[h]
    #1
    \caption{#2}\label{fig:figure}
\end{figure}%
}

% Graphicsname, Caption, width
\newcommand{\fhbrsgraphics}[4]{%
\begin{figure}[h]
    \begin{center}
        \includegraphics[width=#3]{img/#1}
    \end{center}
    \caption{\label{#4}#2}
\end{figure}
}

% pos, Caption, Columns
\newenvironment{fhbrstable}[3]{%
\begin{table}[#1]
\caption{#3}
    \begin{tabular*}{\textwidth}{#2}\label{tab:table}%
}{ %
\end{tabular*}
\end{table}%
}

\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\module}[1]{\texttt{#1}}

\newcommand{\introterm}[1]{\emph{#1}}

% Name, Comment
\newcommand{\introglosterm}[2]{%
\xglossary{name={#1},description={#2}}{\emph{#1}} % TODO Die Pakete glossary und ngerman sind veraltet, stattdessen babel und glossaries benutzen.
}

\newcommand{\introglostermshort}[3]{%
\xglossary{name={#1},description={#2. #3}}{#1 (\emph{#2})} % TODO Die Pakete glossary und ngerman sind veraltet, stattdessen babel und glossaries benutzen.
}

\newcommand\todo[1]{\begin{itemize}\color{red}{\item#1}\end{itemize}} % Todo feature. Usage: \todo{Text.}
